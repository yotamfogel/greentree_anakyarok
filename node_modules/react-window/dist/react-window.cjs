"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const X=require("react/jsx-runtime"),o=require("react");function ce(e){let t=e;for(;t;){if(t.dir)return t.dir==="rtl";t=t.parentElement}return!1}function ae(e,t){const[s,r]=o.useState(t==="rtl");return o.useLayoutEffect(()=>{e&&(t||r(ce(e)))},[t,e]),s}const F=typeof window<"u"?o.useLayoutEffect:o.useEffect;function P(e){if(e!==void 0)switch(typeof e){case"number":return e;case"string":{if(e.endsWith("px"))return parseFloat(e);break}}}function ue({box:e,defaultHeight:t,defaultWidth:s,disabled:r,element:n,mode:i,style:l}){const{styleHeight:u,styleWidth:c}=o.useMemo(()=>({styleHeight:P(l?.height),styleWidth:P(l?.width)}),[l?.height,l?.width]),[a,d]=o.useState({height:t,width:s}),f=r||i==="only-height"&&u!==void 0||i==="only-width"&&c!==void 0||u!==void 0&&c!==void 0;return F(()=>{if(n===null||f)return;const x=new ResizeObserver(v=>{for(const y of v){const{contentRect:I,target:p}=y;n===p&&d(w=>w.height===I.height&&w.width===I.width?w:{height:I.height,width:I.width})}});return x.observe(n,{box:e}),()=>{x?.unobserve(n)}},[e,f,n,u,c]),o.useMemo(()=>({height:u??a.height,width:c??a.width}),[a,u,c])}function te(e){const t=o.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return F(()=>{t.current=e},[e]),o.useCallback(s=>t.current?.(s),[t])}let G=null;function fe(e=!1){if(G===null||e){const t=document.createElement("div"),s=t.style;s.width="50px",s.height="50px",s.overflow="scroll",s.direction="rtl";const r=document.createElement("div"),n=r.style;return n.width="100px",n.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?G="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?G="negative":G="positive-ascending"),document.body.removeChild(t),G}return G}function N({containerElement:e,direction:t,isRtl:s,scrollOffset:r}){if(t==="horizontal"&&s)switch(fe()){case"negative":return-r;case"positive-descending":{if(e){const{clientWidth:n,scrollLeft:i,scrollWidth:l}=e;return l-n-i}break}}return r}function H(e,t="Assertion error"){if(!e)throw console.error(t),Error(t)}function q(e,t){if(e===t)return!0;if(!!e!=!!t||(H(e!==void 0),H(t!==void 0),Object.keys(e).length!==Object.keys(t).length))return!1;for(const s in e)if(!Object.is(t[s],e[s]))return!1;return!0}function se({cachedBounds:e,itemCount:t,itemSize:s}){if(t===0)return 0;if(typeof s=="number")return t*s;{const r=e.get(e.size===0?0:e.size-1);H(r!==void 0,"Unexpected bounds cache miss");const n=(r.scrollOffset+r.size)/e.size;return t*n}}function de({align:e,cachedBounds:t,index:s,itemCount:r,itemSize:n,containerScrollOffset:i,containerSize:l}){const u=se({cachedBounds:t,itemCount:r,itemSize:n}),c=t.get(s),a=Math.max(0,Math.min(u-l,c.scrollOffset)),d=Math.max(0,c.scrollOffset-l+c.size);switch(e==="smart"&&(i>=d&&i<=a?e="auto":e="center"),e){case"start":return a;case"end":return d;case"center":return c.scrollOffset<=l/2?0:c.scrollOffset+c.size/2>=u-l/2?u-l:c.scrollOffset+c.size/2-l/2;case"auto":default:return i>=d&&i<=a?i:i<d?d:a}}function ee({cachedBounds:e,containerScrollOffset:t,containerSize:s,itemCount:r,overscanCount:n}){const i=r-1;let l=0,u=-1,c=0,a=-1,d=0;for(;d<i;){const f=e.get(d);if(f.scrollOffset+f.size>t)break;d++}for(l=d,c=Math.max(0,l-n);d<i;){const f=e.get(d);if(f.scrollOffset+f.size>=t+s)break;d++}return u=Math.min(i,d),a=Math.min(r-1,u+n),l<0&&(l=0,u=-1,c=0,a=-1),{startIndexVisible:l,stopIndexVisible:u,startIndexOverscan:c,stopIndexOverscan:a}}function he({itemCount:e,itemProps:t,itemSize:s}){const r=new Map;return{get(n){for(H(n<e,`Invalid index ${n}`);r.size-1<n;){const l=r.size;let u;switch(typeof s){case"function":{u=s(l,t);break}case"number":{u=s;break}}if(l===0)r.set(l,{size:u,scrollOffset:0});else{const c=r.get(l-1);H(c!==void 0,`Unexpected bounds cache miss for index ${n}`),r.set(l,{scrollOffset:c.scrollOffset+c.size,size:u})}}const i=r.get(n);return H(i!==void 0,`Unexpected bounds cache miss for index ${n}`),i},set(n,i){r.set(n,i)},get size(){return r.size}}}function ge({itemCount:e,itemProps:t,itemSize:s}){return o.useMemo(()=>he({itemCount:e,itemProps:t,itemSize:s}),[e,t,s])}function xe({containerSize:e,itemSize:t}){let s;switch(typeof t){case"string":{H(t.endsWith("%"),`Invalid item size: "${t}"; string values must be percentages (e.g. "100%")`),H(e!==void 0,"Container size must be defined if a percentage item size is specified"),s=e*parseInt(t)/100;break}default:{s=t;break}}return s}function J({containerElement:e,containerStyle:t,defaultContainerSize:s=0,direction:r,isRtl:n=!1,itemCount:i,itemProps:l,itemSize:u,onResize:c,overscanCount:a}){const[d,f]=o.useState({startIndexVisible:0,startIndexOverscan:0,stopIndexVisible:-1,stopIndexOverscan:-1}),{startIndexVisible:x,startIndexOverscan:v,stopIndexVisible:y,stopIndexOverscan:I}={startIndexVisible:Math.min(i-1,d.startIndexVisible),startIndexOverscan:Math.min(i-1,d.startIndexOverscan),stopIndexVisible:Math.min(i-1,d.stopIndexVisible),stopIndexOverscan:Math.min(i-1,d.stopIndexOverscan)},{height:p=s,width:w=s}=ue({defaultHeight:r==="vertical"?s:void 0,defaultWidth:r==="horizontal"?s:void 0,element:e,mode:r==="vertical"?"only-height":"only-width",style:t}),S=o.useRef({height:0,width:0}),k=r==="vertical"?p:w,h=xe({containerSize:k,itemSize:u});o.useLayoutEffect(()=>{if(typeof c=="function"){const g=S.current;(g.height!==p||g.width!==w)&&(c({height:p,width:w},{...g}),g.height=p,g.width=w)}},[p,c,w]);const z=ge({itemCount:i,itemProps:l,itemSize:h}),V=o.useCallback(g=>z.get(g),[z]),T=o.useCallback(()=>se({cachedBounds:z,itemCount:i,itemSize:h}),[z,i,h]),$=o.useCallback(g=>{const R=N({containerElement:e,direction:r,isRtl:n,scrollOffset:g});return ee({cachedBounds:z,containerScrollOffset:R,containerSize:k,itemCount:i,overscanCount:a})},[z,e,k,r,n,i,a]);F(()=>{const g=(r==="vertical"?e?.scrollTop:e?.scrollLeft)??0;f($(g))},[e,r,$]),F(()=>{if(!e)return;const g=()=>{f(R=>{const{scrollLeft:M,scrollTop:m}=e,b=N({containerElement:e,direction:r,isRtl:n,scrollOffset:r==="vertical"?m:M}),L=ee({cachedBounds:z,containerScrollOffset:b,containerSize:k,itemCount:i,overscanCount:a});return q(L,R)?R:L})};return e.addEventListener("scroll",g),()=>{e.removeEventListener("scroll",g)}},[z,e,k,r,i,a]);const O=te(({align:g="auto",containerScrollOffset:R,index:M})=>{let m=de({align:g,cachedBounds:z,containerScrollOffset:R,containerSize:k,index:M,itemCount:i,itemSize:h});if(e){if(m=N({containerElement:e,direction:r,isRtl:n,scrollOffset:m}),typeof e.scrollTo!="function"){const b=$(m);q(d,b)||f(b)}return m}});return{getCellBounds:V,getEstimatedSize:T,scrollToIndex:O,startIndexOverscan:v,startIndexVisible:x,stopIndexOverscan:I,stopIndexVisible:y}}function re(e){return o.useMemo(()=>e,Object.values(e))}function ne(e,t){const{ariaAttributes:s,style:r,...n}=e,{ariaAttributes:i,style:l,...u}=t;return q(s,i)&&q(r,l)&&q(n,u)}function pe({cellComponent:e,cellProps:t,children:s,className:r,columnCount:n,columnWidth:i,defaultHeight:l=0,defaultWidth:u=0,dir:c,gridRef:a,onCellsRendered:d,onResize:f,overscanCount:x=3,rowCount:v,rowHeight:y,style:I,tagName:p="div",...w}){const S=re(t),k=o.useMemo(()=>o.memo(e,ne),[e]),[h,z]=o.useState(null),V=ae(h,c),{getCellBounds:T,getEstimatedSize:$,startIndexOverscan:O,startIndexVisible:g,scrollToIndex:R,stopIndexOverscan:M,stopIndexVisible:m}=J({containerElement:h,containerStyle:I,defaultContainerSize:u,direction:"horizontal",isRtl:V,itemCount:n,itemProps:S,itemSize:i,onResize:f,overscanCount:x}),{getCellBounds:b,getEstimatedSize:L,startIndexOverscan:A,startIndexVisible:Q,scrollToIndex:_,stopIndexOverscan:C,stopIndexVisible:Z}=J({containerElement:h,containerStyle:I,defaultContainerSize:l,direction:"vertical",itemCount:v,itemProps:S,itemSize:y,onResize:f,overscanCount:x});o.useImperativeHandle(a,()=>({get element(){return h},scrollToCell({behavior:j="auto",columnAlign:E="auto",columnIndex:W,rowAlign:B="auto",rowIndex:D}){const U=R({align:E,containerScrollOffset:h?.scrollLeft??0,index:W}),le=_({align:B,containerScrollOffset:h?.scrollTop??0,index:D});typeof h?.scrollTo=="function"&&h.scrollTo({behavior:j,left:U,top:le})},scrollToColumn({align:j="auto",behavior:E="auto",index:W}){const B=R({align:j,containerScrollOffset:h?.scrollLeft??0,index:W});typeof h?.scrollTo=="function"&&h.scrollTo({behavior:E,left:B})},scrollToRow({align:j="auto",behavior:E="auto",index:W}){const B=_({align:j,containerScrollOffset:h?.scrollTop??0,index:W});typeof h?.scrollTo=="function"&&h.scrollTo({behavior:E,top:B})}}),[h,R,_]),o.useEffect(()=>{O>=0&&M>=0&&A>=0&&C>=0&&d&&d({columnStartIndex:g,columnStopIndex:m,rowStartIndex:Q,rowStopIndex:Z},{columnStartIndex:O,columnStopIndex:M,rowStartIndex:A,rowStopIndex:C})},[d,O,g,M,m,A,Q,C,Z]);const oe=o.useMemo(()=>{const j=[];if(n>0&&v>0)for(let E=A;E<=C;E++){const W=b(E),B=[];for(let D=O;D<=M;D++){const U=T(D);B.push(o.createElement(k,{...S,ariaAttributes:{"aria-colindex":D+1,role:"gridcell"},columnIndex:D,key:D,rowIndex:E,style:{position:"absolute",left:V?void 0:0,right:V?0:void 0,transform:`translate(${V?-U.scrollOffset:U.scrollOffset}px, ${W.scrollOffset}px)`,height:W.size,width:U.size}}))}j.push(X.jsx("div",{role:"row","aria-rowindex":E+1,children:B},E))}return j},[k,S,n,O,M,T,b,V,v,A,C]),ie=X.jsx("div",{"aria-hidden":!0,style:{height:L(),width:$(),zIndex:-1}});return o.createElement(p,{"aria-colcount":n,"aria-rowcount":v,role:"grid",...w,className:r,dir:c,ref:z,style:{position:"relative",width:"100%",height:"100%",maxHeight:"100%",maxWidth:"100%",flexGrow:1,overflow:"auto",...I}},oe,s,ie)}const be=o.useState,me=o.useRef;function ve(e){return e!=null&&typeof e=="object"&&"getAverageRowHeight"in e&&typeof e.getAverageRowHeight=="function"}const K="data-react-window-index";function Ie({children:e,className:t,defaultHeight:s=0,listRef:r,onResize:n,onRowsRendered:i,overscanCount:l=3,rowComponent:u,rowCount:c,rowHeight:a,rowProps:d,tagName:f="div",style:x,...v}){const y=re(d),I=o.useMemo(()=>o.memo(u,ne),[u]),[p,w]=o.useState(null),S=ve(a),k=o.useMemo(()=>S?m=>a.getRowHeight(m)??a.getAverageRowHeight():a,[S,a]),{getCellBounds:h,getEstimatedSize:z,scrollToIndex:V,startIndexOverscan:T,startIndexVisible:$,stopIndexOverscan:O,stopIndexVisible:g}=J({containerElement:p,containerStyle:x,defaultContainerSize:s,direction:"vertical",itemCount:c,itemProps:y,itemSize:k,onResize:n,overscanCount:l});o.useImperativeHandle(r,()=>({get element(){return p},scrollToRow({align:m="auto",behavior:b="auto",index:L}){const A=V({align:m,containerScrollOffset:p?.scrollTop??0,index:L});typeof p?.scrollTo=="function"&&p.scrollTo({behavior:b,top:A})}}),[p,V]),F(()=>{if(!p)return;const m=Array.from(p.children).filter((b,L)=>{if(b.hasAttribute("aria-hidden"))return!1;const A=`${T+L}`;return b.setAttribute(K,A),!0});if(S)return a.observeRowElements(m)},[p,S,a,T,O]),o.useEffect(()=>{T>=0&&O>=0&&i&&i({startIndex:$,stopIndex:g},{startIndex:T,stopIndex:O})},[i,T,$,O,g]);const R=o.useMemo(()=>{const m=[];if(c>0)for(let b=T;b<=O;b++){const L=h(b);m.push(o.createElement(I,{...y,ariaAttributes:{"aria-posinset":b+1,"aria-setsize":c,role:"listitem"},key:b,index:b,style:{position:"absolute",left:0,transform:`translateY(${L.scrollOffset}px)`,height:S?void 0:L.size,width:"100%"}}))}return m},[I,h,S,c,y,T,O]),M=X.jsx("div",{"aria-hidden":!0,style:{height:z(),width:"100%",zIndex:-1}});return o.createElement(f,{role:"list",...v,className:t,ref:w,style:{position:"relative",maxHeight:"100%",flexGrow:1,overflowY:"auto",...x}},R,e,M)}function we({defaultRowHeight:e,key:t}){const[s,r]=o.useState({key:t,map:new Map});s.key!==t&&r({key:t,map:new Map});const{map:n}=s,i=o.useCallback(()=>{let f=0;return n.forEach(x=>{f+=x}),f===0?e:f/n.size},[e,n]),l=o.useCallback(f=>n.get(f),[n]),u=o.useCallback((f,x)=>{r(v=>{if(v.map.get(f)===x)return v;const y=new Map(v.map);return y.set(f,x),{...v,map:y}})},[]),c=te(f=>{f.length!==0&&f.forEach(x=>{const{borderBoxSize:v,target:y}=x,I=y.getAttribute(K);H(I!==null,`Invalid ${K} attribute value`);const p=parseInt(I),{blockSize:w}=v[0];w&&u(p,w)})}),[a]=o.useState(()=>new ResizeObserver(c));o.useEffect(()=>()=>{a.disconnect()},[a]);const d=o.useCallback(f=>(f.forEach(x=>a.observe(x)),()=>{f.forEach(x=>a.unobserve(x))}),[a]);return o.useMemo(()=>({getAverageRowHeight:i,getRowHeight:l,setRowHeight:u,observeRowElements:d}),[i,l,u,d])}const ye=o.useState,Oe=o.useRef;let Y=-1;function Se(e=!1){if(Y===-1||e){const t=document.createElement("div"),s=t.style;s.width="50px",s.height="50px",s.overflow="scroll",document.body.appendChild(t),Y=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Y}exports.Grid=pe;exports.List=Ie;exports.getScrollbarSize=Se;exports.useDynamicRowHeight=we;exports.useGridCallbackRef=be;exports.useGridRef=me;exports.useListCallbackRef=ye;exports.useListRef=Oe;
//# sourceMappingURL=react-window.cjs.map
